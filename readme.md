# SFTP Клиент

Консольное приложение для работы с SFTP-сервером, позволяющее управлять парами "домен-IP адрес" в JSON файле.

## Требования

- Java 8 или выше
- Maven 3.6 или выше
- SFTP-сервер для тестирования

## Сборка проекта

### Через IntelliJ IDEA:

1. Откройте проект в IntelliJ IDEA:
   - File -> Open -> Выберите папку проекта

2. Настройте проект:
   - File -> Project Structure -> Project
   - Убедитесь, что выбрана Java 8 или выше
   - Убедитесь, что Maven правильно импортировал зависимости

3. Соберите проект:
   - В правой панели откройте Maven
   - Выполните команду `clean package`
   - Или в терминале выполните: `mvn clean package`

### Через командную строку:

```bash
mvn clean package
```

После сборки в папке `target` будут созданы:
- `sftp-client.jar` - исполняемый файл клиента
- `auto-tests.jar` - исполняемый файл для запуска тестов

## Запуск приложения

### Запуск клиента
```bash
java -jar target/sftp-client.jar
```

### Запуск тестов
```bash
java -jar target/auto-tests.jar
```

При запуске клиента приложение запросит:
1. Адрес SFTP-сервера
2. Порт
3. Логин
4. Пароль

После успешного подключения приложение автоматически ищет файл с расширением .json в 
корневой директории SFTP-сервера. Если файл найден, он будет использован для работы 
с парами "домен-IP". Если файл отсутствует, будет создан новый JSON-файл.

После этого будет доступно меню с операциями:
1. Получение списка пар "домен – адрес"
2. Получение IP-адреса по домену
3. Получение домена по IP-адресу
4. Добавление новой пары
5. Удаление пары
6. Завершение работы


## Запуск тестов

### Через IntelliJ IDEA:
1. Откройте Project Explorer
2. Перейдите в папку `src/test/java`
3. Правый клик на папке -> Run 'All Tests'

### Через Maven:
```bash
   mvn test
```

Важно:
Перед запуском тестов убедитесь, что в тестовых классах 
(например, SFTPClientTest) указаны актуальные данные для 
подключения к SFTP-серверу:

Хост
Порт
Логин
Пароль

Эти данные находятся в константах класса.

## Обоснование тестов

Тесты разделены на несколько категорий:

1. `SFTPClientTest` - проверяет:
   - Подключение к серверу с разными параметрами
   - Загрузку и скачивание файлов
   - Работу при отсутствии соединения
   - Обработку неверных учетных данных

2. `FileServiceTest` - проверяет:
   - Работу с JSON файлом
   - Добавление и удаление пар
   - Обработку некорректных данных
   - Уникальность доменов и IP
   - Обработку пустых файлов
   - Обработку неверного формата JSON

3. `InputHandlerTest` - проверяет:
   - Валидацию IPv4 адресов
   - Обработку граничных значений (0.0.0.0 и 255.255.255.255)
   - Обработку некорректных IP-адресов

4. `DomainIpPairTest` - проверяет:
   - Корректность работы с парами домен-IP
   - Валидацию данных при создании пары

Все тесты включают как позитивные, так и негативные сценарии для обеспечения надежности приложения.

## Примечания
 - Убедитесь, что SFTP-сервер доступен и настроен перед запуском тестов или приложения.
 - Если JSON-файл отсутствует на сервере, приложение создаст его автоматически при первой операции записи.
 - Тесты запускаются автоматически при сборке проекта. Чтобы пропустить запуск тестов при сборке, используйте флаг `-DskipTests`: 
   ```bash
   mvn clean package -DskipTests
   ```